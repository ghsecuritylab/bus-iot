<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>公車與公車站物聯網監控</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://gw.alipayobjects.com/as/g/datavis/g6/1.1.6/index.js"></script>
    <style>
        * {
            font-family: 微軟正黑體;
        }

        body {
            overflow-x: hidden;
        }

        .dropdown-menu {
            left: 35%;
        }
    </style>
</head>

<body align="center">
    <div class="container">
        <h1>公車與公車站物聯網監控系統</h1>
        <p>請挑選想查詢的公車路線</p>
        <div class="dropdown dropdown-menu-center">
            <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                    選擇路線
                  <span class="caret"></span>
            </button>
            <ul class="dropdown-menu"></ul>
        </div>
        <h2 id="pathName"></h2>
    </div>
    <div id="c1"></div>
    <script>
        let busList = [{"id":157886,"name":"680"},{"id":11031,"name":"棕10"},{"id":110510,"name":"小1"},{"id":157460,"name":"小12往富德公墓"},{"id":110520,"name":"小12往動物園"},{"id":110550,"name":"小2"},{"id":110630,"name":"小1區經康寧"},{"id":110620,"name":"小1區"},{"id":111330,"name":"小36經中山"},{"id":110640,"name":"小36"},{"id":157882,"name":"小11經救千宮"},{"id":157884,"name":"小11經救千宮、捷運七張站"},{"id":157883,"name":"小11經捷運七張站"},{"id":110730,"name":"小11"},{"id":157693,"name":"藍27(僅返程)"},{"id":157692,"name":"藍27(僅往程)"},{"id":155955,"name":"藍27不經三總"},{"id":11111,"name":"藍27經三總"},{"id":111230,"name":"550"},{"id":157537,"name":"302不經關渡宮"},{"id":111250,"name":"302經關渡宮"},{"id":111460,"name":"市民小巴2"},{"id":157630,"name":"紅7區(往社子)"},{"id":11202,"name":"紅7區"},{"id":157629,"name":"紅7區(往捷運劍潭)"},{"id":112030,"name":"26"},{"id":112070,"name":"小15區"},{"id":104710,"name":"615"},{"id":10722,"name":"藍29"},{"id":107240,"name":"907"},{"id":107340,"name":"景美-榮總(快)"},{"id":10743,"name":"棕11"},{"id":107450,"name":"237"},{"id":107650,"name":"646區"},{"id":107670,"name":"53"},{"id":157811,"name":"藍5返程"},{"id":10831,"name":"藍5去程"},{"id":108420,"name":"222"},{"id":108510,"name":"內湖幹線"},{"id":112110,"name":"小18"},{"id":157455,"name":"小巴1去繞溪山"},{"id":157454,"name":"小巴1返繞溪山"},{"id":112170,"name":"市民小巴1"},{"id":112430,"name":"39"},{"id":153130,"name":"521"},{"id":15341,"name":"紅19"},{"id":157765,"name":"247"},{"id":153560,"name":"553"},{"id":157542,"name":"681往東湖"},{"id":153590,"name":"681往陽明山"},{"id":157470,"name":"藍7跑返程"},{"id":157469,"name":"藍7跑去程"},{"id":15361,"name":"藍7經麥帥新城"},{"id":157468,"name":"藍7不經麥帥新城"},{"id":155719,"name":"605快"},{"id":155718,"name":"605新台五"},{"id":155320,"name":"300"},{"id":15551,"name":"紅30"},{"id":155610,"name":"214"},{"id":157781,"name":"600"},{"id":157881,"name":"600半(南港發)"},{"id":157881,"name":"600半(南港發)"},{"id":155710,"name":"600半(北車發)"},{"id":155710,"name":"600半(北車發)"},{"id":155882,"name":"298區"},{"id":10421,"name":"紅9"},{"id":155949,"name":"645不經三總"},{"id":104610,"name":"645經三總"},{"id":101320,"name":"234"},{"id":104150,"name":"221"},{"id":158714,"name":"綠11經公訓正門"},{"id":11022,"name":"綠11不經公訓正門"},{"id":157758,"name":"綠1捷運新店發車"},{"id":10142,"name":"綠1調度站發車"},{"id":10231,"name":"紅32"},{"id":102320,"name":"紅25"},{"id":102530,"name":"21"},{"id":102630,"name":"536"},{"id":157453,"name":"303區經陽明山"},{"id":102760,"name":"303區經文化"},{"id":102730,"name":"303區"},{"id":102780,"name":"669"},{"id":10291,"name":"棕1"},{"id":157448,"name":"261假日"},{"id":104140,"name":"261"},{"id":10431,"name":"紅31"},{"id":109710,"name":"88(大有)"},{"id":158800,"name":"紅29不經三總"},{"id":158800,"name":"紅29不經三總"},{"id":158800,"name":"紅29不經三總"},{"id":11011,"name":"紅29經三總"},{"id":11011,"name":"紅29經三總"},{"id":11011,"name":"紅29經三總"},{"id":155925,"name":"15萬美"},{"id":118120,"name":"15"},{"id":118210,"name":"33"},{"id":157449,"name":"270假日"},{"id":118410,"name":"270"},{"id":118420,"name":"270區"},{"id":151420,"name":"42"},{"id":151430,"name":"256"},{"id":151510,"name":"308"},{"id":155856,"name":"市民小巴8"},{"id":155931,"name":"市民小巴12"},{"id":155919,"name":"208直"},{"id":107660,"name":"903經三總"},{"id":107630,"name":"903不經三總"},{"id":108530,"name":"287區"},{"id":108560,"name":"281"},{"id":107610,"name":"630(欣欣)"},{"id":108610,"name":"630"},{"id":108630,"name":"38區"},{"id":108720,"name":"46"},{"id":10941,"name":"藍25"},{"id":111360,"name":"小21"},{"id":112140,"name":"小18區"},{"id":10251,"name":"棕9"},{"id":102770,"name":"542"},{"id":111370,"name":"小22"},{"id":104810,"name":"265經中央路"},{"id":10751,"name":"棕12"},{"id":157762,"name":"市民小巴7經祖師廟"},{"id":108820,"name":"市民小巴7"},{"id":108830,"name":"市民小巴7經慈恩"},{"id":111340,"name":"小8"},{"id":157751,"name":"內科11(內科-新莊)"},{"id":155836,"name":"內科11(新莊-內科)"},{"id":155913,"name":"內科12往新莊"},{"id":155837,"name":"內科12往內科"},{"id":155912,"name":"內科13往天母"},{"id":155838,"name":"內科13往內科"},{"id":155845,"name":"內科2往內科"},{"id":155909,"name":"內科2往中和高中"},{"id":157749,"name":"內科7(內科-汐止車站)"},{"id":155850,"name":"內科7(汐止車站-內科)"},{"id":157465,"name":"南軟中和(返)"},{"id":155827,"name":"南軟中和(去)"},{"id":157711,"name":"內科圓山往圓山(大都會)"},{"id":157712,"name":"內科圓山往圓山(首都)"},{"id":157712,"name":"內科圓山往圓山(首都)"},{"id":157712,"name":"內科圓山往圓山(首都)"},{"id":157709,"name":"內科圓山往內科(大都會)"},{"id":155916,"name":"內科圓山往圓山(光華)"},{"id":155916,"name":"內科圓山往圓山(光華)"},{"id":155835,"name":"內科圓山往內科(首都)"},{"id":155835,"name":"內科圓山往內科(首都)"},{"id":155835,"name":"內科圓山往內科(首都)"},{"id":157710,"name":"內科圓山往內科(光華)"},{"id":157710,"name":"內科圓山往內科(光華)"},{"id":155906,"name":"小25經馬場"},{"id":111380,"name":"小25"},{"id":155874,"name":"128"},{"id":155875,"name":"129"},{"id":111510,"name":"230"},{"id":112420,"name":"539"},{"id":15321,"name":"紅10"},{"id":103310,"name":"647"},{"id":10241,"name":"藍36"},{"id":153330,"name":"250"},{"id":155857,"name":"貓空右線"},{"id":10292,"name":"藍10"},{"id":112310,"name":"621"},{"id":104230,"name":"622"},{"id":152210,"name":"682"},{"id":108440,"name":"652"},{"id":102820,"name":"663"},{"id":155150,"name":"668"},{"id":107710,"name":"670"},{"id":107850,"name":"672"},{"id":155130,"name":"711"},{"id":155620,"name":"214直"},{"id":104190,"name":"232快"},{"id":158748,"name":"260區往陽明山"},{"id":108240,"name":"260區"},{"id":155900,"name":"260區經捷運劍潭站"},{"id":108260,"name":"260區經花鐘"},{"id":108570,"name":"262區(大都會)"},{"id":155888,"name":"市民小巴10"},{"id":108620,"name":"38"},{"id":118310,"name":"49"},{"id":111650,"name":"288區"},{"id":111650,"name":"288區"},{"id":111710,"name":"265經明德路"},{"id":157694,"name":"265區(大南)"},{"id":104820,"name":"265區(三重)"},{"id":157866,"name":"266區(文林國小-市府)"},{"id":157865,"name":"266區(市府-文林國小)"},{"id":111530,"name":"266區"},{"id":153520,"name":"268"},{"id":155540,"name":"304重慶北"},{"id":155894,"name":"508區(三重)"},{"id":104420,"name":"508區(大)"},{"id":104420,"name":"508區(大)"},{"id":155717,"name":"605副"},{"id":151720,"name":"556"},{"id":111350,"name":"小14"},{"id":112150,"name":"小19經合誠宮"},{"id":112130,"name":"小19"},{"id":108470,"name":"63"},{"id":108910,"name":"14"},{"id":118110,"name":"0南"},{"id":155935,"name":"紅50"},{"id":110580,"name":"小3"},{"id":11121,"name":"紅35"},{"id":104160,"name":"232"},{"id":10721,"name":"藍28"},{"id":10741,"name":"棕3"},{"id":11021,"name":"棕5"},{"id":110560,"name":"552"},{"id":110660,"name":"32"},{"id":11201,"name":"紅7"},{"id":157750,"name":"內科10(內科-錦繡站)"},{"id":155820,"name":"內科10(錦繡站-內科)"},{"id":157752,"name":"內科17(內科-士林)"},{"id":155841,"name":"內科17(士林-內科)"},{"id":155918,"name":"內科3往土城"},{"id":155918,"name":"內科3往土城"},{"id":155918,"name":"內科3往土城"},{"id":155847,"name":"內科3往內科"},{"id":155847,"name":"內科3往內科"},{"id":155847,"name":"內科3往內科"},{"id":157748,"name":"內科6(內科-蘆洲站)"},{"id":155849,"name":"內科6(蘆洲站-內科)"},{"id":155911,"name":"內科8往松山車站"},{"id":155851,"name":"內科8往內科"},{"id":157466,"name":"南軟雙和(返)"},{"id":157466,"name":"南軟雙和(返)"},{"id":157466,"name":"南軟雙和(返)"},{"id":157466,"name":"南軟雙和(返)"},{"id":155831,"name":"南軟雙和(去)"},{"id":155831,"name":"南軟雙和(去)"},{"id":155831,"name":"南軟雙和(去)"},{"id":155831,"name":"南軟雙和(去)"},{"id":155530,"name":"304承德路"},{"id":108460,"name":"286副"},{"id":104520,"name":"641"},{"id":10749,"name":"棕11副"},{"id":157683,"name":"617不經三總"},{"id":104220,"name":"617經三總"},{"id":107640,"name":"531"},{"id":157527,"name":"市民小巴5經仙岩"},{"id":157527,"name":"市民小巴5經仙岩"},{"id":107910,"name":"市民小巴5"},{"id":107910,"name":"市民小巴5"},{"id":102330,"name":"588"},{"id":151410,"name":"28"},{"id":155927,"name":"小3區"},{"id":155924,"name":"292副"},{"id":110410,"name":"297"},{"id":111580,"name":"218區"},{"id":112060,"name":"小15"},{"id":112510,"name":"棕13"},{"id":155914,"name":"內科15往天母"},{"id":155914,"name":"內科15往天母"},{"id":155839,"name":"內科15往內科"},{"id":155839,"name":"內科15往內科"},{"id":102620,"name":"2"},{"id":110530,"name":"小12區"},{"id":118150,"name":"606"},{"id":110590,"name":"小5(光明寺)"},{"id":112320,"name":"211"},{"id":155938,"name":"672區"},{"id":158148,"name":"市民小巴9經中興院區"},{"id":155859,"name":"市民小巴9不經中興院區"},{"id":155120,"name":"675"},{"id":10893,"name":"274"},{"id":10874,"name":"277"},{"id":157756,"name":"279(往天母)"},{"id":157756,"name":"279(往天母)"},{"id":157756,"name":"279(往天母)"},{"id":15391,"name":"279(往東湖)"},{"id":15391,"name":"279(往東湖)"},{"id":15391,"name":"279(往東湖)"},{"id":15546,"name":"280"},{"id":15162,"name":"282"},{"id":11221,"name":"284"},{"id":11246,"name":"292"},{"id":11421,"name":"513"},{"id":10293,"name":"民生幹線"},{"id":15164,"name":"530"},{"id":11881,"name":"601"},{"id":16121,"name":"604"},{"id":11093,"name":"612"},{"id":15581,"name":"616"},{"id":11094,"name":"612區"},{"id":15184,"name":"905副"},{"id":155928,"name":"265夜間公車"},{"id":155898,"name":"225區"},{"id":11834,"name":"688"},{"id":157442,"name":"212夜"},{"id":157443,"name":"236夜"},{"id":155933,"name":"貓空左線-指南宮線"},{"id":155937,"name":"108區(二子坪)"},{"id":15653,"name":"220直"},{"id":11763,"name":"236區"},{"id":11764,"name":"251區"},{"id":15657,"name":"280直"},{"id":11222,"name":"284直"},{"id":15638,"name":"677"},{"id":157444,"name":"藍50"},{"id":158794,"name":"小16經350巷"},{"id":158477,"name":"小16經陽第一"},{"id":158476,"name":"小16經296、350、500巷"},{"id":158479,"name":"小16經245巷34弄"},{"id":158478,"name":"小16經陽"},{"id":112080,"name":"小16"},{"id":10332,"name":"松江新生幹線"},{"id":11742,"name":"611"},{"id":10333,"name":"644"},{"id":10334,"name":"650"},{"id":157447,"name":"651假日"},{"id":16122,"name":"651"},{"id":15191,"name":"660"},{"id":10736,"name":"671"},{"id":159203,"name":"685經吉林"},{"id":10811,"name":"685繞忠義街德行東路"},{"id":15183,"name":"905"},{"id":10754,"name":"915"},{"id":10911,"name":"212直"},{"id":15522,"name":"227區"},{"id":151710,"name":"902"},{"id":153550,"name":"240直"},{"id":111570,"name":"218直"},{"id":10261,"name":"紅33"},{"id":104410,"name":"508"},{"id":158848,"name":"223不經大度立德路口"},{"id":157536,"name":"223不經關渡宮"},{"id":111240,"name":"223經關渡宮"},{"id":118510,"name":"276"},{"id":157755,"name":"內科20(內科-捷市政府)"},{"id":157755,"name":"內科20(內科-捷市政府)"},{"id":155846,"name":"內科20(捷市政府-內科)"},{"id":155846,"name":"內科20(捷市政府-內科)"},{"id":104730,"name":"306(三重)"},{"id":118520,"name":"306(大都會)"},{"id":108480,"name":"505"},{"id":155716,"name":"605"},{"id":102210,"name":"618"},{"id":107250,"name":"568"},{"id":10723,"name":"1"},{"id":11861,"name":"5"},{"id":10882,"name":"9"},{"id":10726,"name":"18"},{"id":10832,"name":"22"},{"id":11091,"name":"37"},{"id":11871,"name":"41"},{"id":10792,"name":"52"},{"id":10792,"name":"52"},{"id":15362,"name":"72"},{"id":11833,"name":"74"},{"id":157526,"name":"203往北峰"},{"id":157526,"name":"203往北峰"},{"id":15314,"name":"203往天母"},{"id":15314,"name":"203往天母"},{"id":157878,"name":"204往東園"},{"id":157877,"name":"204往內湖"},{"id":11212,"name":"204"},{"id":15112,"name":"208"},{"id":15322,"name":"215"},{"id":15375,"name":"224"},{"id":10443,"name":"225"},{"id":11245,"name":"226"},{"id":15521,"name":"227"},{"id":10712,"name":"251"},{"id":157714,"name":"市民小巴15"},{"id":159045,"name":"957"},{"id":159045,"name":"957"},{"id":157862,"name":"679"},{"id":105020,"name":"299區(三重)"},{"id":118230,"name":"299區(大都會)"},{"id":15373,"name":"220"},{"id":10942,"name":"257"},{"id":157450,"name":"311假日"},{"id":15563,"name":"311"},{"id":157857,"name":"棕22"},{"id":110610,"name":"小5區"},{"id":104170,"name":"232副"},{"id":10711,"name":"236"},{"id":157713,"name":"小28"},{"id":10328,"name":"643"},{"id":157534,"name":"756"},{"id":157608,"name":"棕21"},{"id":158718,"name":"棕20經美堤"},{"id":155942,"name":"棕20不經美堤"},{"id":157874,"name":"1501(動物園發車)"},{"id":157797,"name":"1501(五股發車)"},{"id":157801,"name":"254區"},{"id":107820,"name":"673"},{"id":153340,"name":"620"},{"id":109510,"name":"620(大有)"},{"id":112120,"name":"小17經莊頂"},{"id":112090,"name":"小17"},{"id":158146,"name":"小30"},{"id":158797,"name":"紅57(北客)"},{"id":158797,"name":"紅57(北客)"},{"id":158149,"name":"紅57"},{"id":158149,"name":"紅57"},{"id":158149,"name":"紅57"},{"id":158149,"name":"紅57"},{"id":10742,"name":"棕6"},{"id":158480,"name":"557"},{"id":157539,"name":"藍51"},{"id":155930,"name":"貓空左線-動物園線"},{"id":112410,"name":"662"},{"id":158754,"name":"1717(北車發不繞劍潭)"},{"id":157856,"name":"1717(金山發車)"},{"id":157855,"name":"1717(北車發繞劍潭)"},{"id":157860,"name":"紅55"},{"id":158145,"name":"懷恩專車S32"},{"id":157541,"name":"懷恩專車S33"},{"id":157541,"name":"懷恩專車S33"},{"id":158795,"name":"42區經劍潭山"},{"id":157594,"name":"42區"},{"id":157182,"name":"南軟北投(往北投)"},{"id":155829,"name":"南軟北投(往南軟)"},{"id":158475,"name":"1503(動物園發車)"},{"id":157798,"name":"1503(五股發車)"},{"id":157799,"name":"757"},{"id":158510,"name":"949"},{"id":158584,"name":"950返程半"},{"id":158544,"name":"950去程半"},{"id":109610,"name":"262(大有)"},{"id":157815,"name":"551經金龍禪寺"},{"id":157763,"name":"551"},{"id":111420,"name":"小9"},{"id":151610,"name":"676"},{"id":153320,"name":"267"},{"id":153710,"name":"200"},{"id":15541,"name":"紅15"},{"id":155915,"name":"內科16往北投"},{"id":155840,"name":"內科16往內科"},{"id":157753,"name":"內科18(內科-捷民權西)"},{"id":155843,"name":"內科18(捷民權西-內科)"},{"id":157181,"name":"南軟天母(往天母)"},{"id":155828,"name":"南軟天母(往南軟)"},{"id":155881,"name":"棕18"},{"id":155881,"name":"棕18"},{"id":157462,"name":"307莒光經板橋前站"},{"id":157462,"name":"307莒光經板橋前站"},{"id":157462,"name":"307莒光經板橋前站"},{"id":157462,"name":"307莒光經板橋前站"},{"id":157462,"name":"307莒光經板橋前站"},{"id":157463,"name":"307莒光經撫遠街"},{"id":157463,"name":"307莒光經撫遠街"},{"id":157463,"name":"307莒光經撫遠街"},{"id":157463,"name":"307莒光經撫遠街"},{"id":157463,"name":"307莒光經撫遠街"},{"id":157685,"name":"307西藏全(民生發)"},{"id":157685,"name":"307西藏全(民生發)"},{"id":157685,"name":"307西藏全(民生發)"},{"id":157685,"name":"307西藏全(民生發)"},{"id":157685,"name":"307西藏全(民生發)"},{"id":158682,"name":"68副(往洲美)"},{"id":158681,"name":"68副(往劍潭)"},{"id":112050,"name":"68副"},{"id":153350,"name":"683"},{"id":158730,"name":"兒童新樂園1"},{"id":158730,"name":"兒童新樂園1"},{"id":158730,"name":"兒童新樂園1"},{"id":158730,"name":"兒童新樂園1"},{"id":158730,"name":"兒童新樂園1"},{"id":158730,"name":"兒童新樂園1"},{"id":158730,"name":"兒童新樂園1"},{"id":158730,"name":"兒童新樂園1"},{"id":158730,"name":"兒童新樂園1"},{"id":158730,"name":"兒童新樂園1"},{"id":157610,"name":"紅5往陽明山經文大"},{"id":157609,"name":"紅5往劍潭經文大"},{"id":158420,"name":"紅5往劍潭"},{"id":158419,"name":"紅5往陽明山"},{"id":10821,"name":"紅5"},{"id":108640,"name":"12"},{"id":15163,"name":"282副"},{"id":158675,"name":"311區"},{"id":158592,"name":"紅3"},{"id":157461,"name":"299(大都會)"},{"id":11411,"name":"299(三重)"},{"id":158725,"name":"綠16"},{"id":11141,"name":"216區"},{"id":158726,"name":"綠17"},{"id":111560,"name":"218"},{"id":15185,"name":"202區"},{"id":15372,"name":"206"},{"id":155808,"name":"39夜"},{"id":155904,"name":"棕19"},{"id":110230,"name":"298"},{"id":111430,"name":"小26"},{"id":111610,"name":"529"},{"id":10733,"name":"棕2"},{"id":107480,"name":"295"},{"id":107490,"name":"295經芳蘭路"},{"id":108450,"name":"286"},{"id":151730,"name":"912"},{"id":153810,"name":"246"},{"id":111220,"name":"小23"},{"id":101810,"name":"205"},{"id":103260,"name":"648"},{"id":157848,"name":"藍26往捷運市政府"},{"id":10432,"name":"藍26"},{"id":157849,"name":"藍26往舊宗路"},{"id":118130,"name":"109"},{"id":15312,"name":"紅2"},{"id":112520,"name":"255"},{"id":155844,"name":"內科19(捷市政府-內科)"},{"id":157754,"name":"內科19(內科-捷市政府)"},{"id":108220,"name":"108"},{"id":107470,"name":"294"},{"id":155889,"name":"602(天母)"},{"id":155890,"name":"602(北投)"},{"id":118530,"name":"306區"},{"id":10746,"name":"252"},{"id":108410,"name":"0東"},{"id":157441,"name":"278區"},{"id":157695,"name":"278不經三總"},{"id":107520,"name":"278經三總"},{"id":155892,"name":"藍20區"},{"id":155910,"name":"內科5往市政府"},{"id":155848,"name":"內科5往內科"},{"id":153580,"name":"247區"},{"id":112040,"name":"68"},{"id":155956,"name":"懷恩專車S31"},{"id":10783,"name":"254"},{"id":157464,"name":"棕15區三玄宮去"},{"id":15113,"name":"208區"},{"id":102750,"name":"303經陽明山"},{"id":102720,"name":"303"},{"id":10912,"name":"212"},{"id":10873,"name":"20"},{"id":10873,"name":"20"},{"id":155883,"name":"市民小巴11"},{"id":158857,"name":"679區"},{"id":111390,"name":"小6"},{"id":158870,"name":"216"},{"id":158869,"name":"558"},{"id":157864,"name":"266(市府-北投)"},{"id":157863,"name":"266(北投-市府)"},{"id":111520,"name":"266"},{"id":111450,"name":"小7"},{"id":111410,"name":"小7經嶺腳"},{"id":15111,"name":"202"},{"id":157385,"name":"紅34"},{"id":10283,"name":"235"},{"id":158873,"name":"310往士林(半)"},{"id":158873,"name":"310往士林(半)"},{"id":158872,"name":"310往板橋(半)"},{"id":158872,"name":"310往板橋(半)"},{"id":16112,"name":"310"},{"id":16112,"name":"310"},{"id":158892,"name":"955"},{"id":157800,"name":"1505(淡海發車)"},{"id":157875,"name":"1505(安和發車)"},{"id":15531,"name":"紅12"},{"id":157859,"name":"紅55區"},{"id":155854,"name":"207"},{"id":157760,"name":"207往南勢角"},{"id":157761,"name":"207往內湖"},{"id":157439,"name":"小10經田寮橋貓空站，返程經草楠指南宮下山"},{"id":157438,"name":"小10經田寮橋，返程經貓空站、草楠"},{"id":110710,"name":"小10經樟山寺，返程經貓空站、田寮橋"},{"id":157440,"name":"小10經草楠，返程經貓空站、田寮橋"},{"id":110720,"name":"小10經樟山寺，返程經貓空站、草楠"},{"id":157437,"name":"小10經田寮橋，返程經貓空站、樟山寺"},{"id":10744,"name":"棕15"},{"id":155896,"name":"260往陽明山(半)"},{"id":155895,"name":"260往東園(半)"},{"id":104720,"name":"111"},{"id":15331,"name":"紅3區"},{"id":112530,"name":"255區"},{"id":157452,"name":"仁愛幹線(南港發車)假日"},{"id":157451,"name":"仁愛幹線(板橋發車)假日"},{"id":157835,"name":"仁愛幹線(南港發車)半"},{"id":157833,"name":"仁愛幹線(板橋發車)半"},{"id":157834,"name":"仁愛幹線(板橋發車)半(假日)"},{"id":109320,"name":"仁愛幹線(南港發車)"},{"id":101910,"name":"仁愛幹線(板橋發車)"},{"id":810,"name":"敦化幹線"},{"id":157767,"name":"市民小巴6(山豬)大南"},{"id":157766,"name":"市民小巴6大南"},{"id":118540,"name":"市民小巴6大都會"},{"id":118550,"name":"市民小巴6(山豬)大都會"},{"id":158731,"name":"兒童新樂園2"},{"id":158731,"name":"兒童新樂園2"},{"id":158731,"name":"兒童新樂園2"},{"id":158731,"name":"兒童新樂園2"},{"id":158731,"name":"兒童新樂園2"},{"id":158731,"name":"兒童新樂園2"},{"id":158731,"name":"兒童新樂園2"},{"id":158731,"name":"兒童新樂園2"},{"id":158731,"name":"兒童新樂園2"},{"id":158731,"name":"兒童新樂園2"},{"id":155951,"name":"645副不經三總"},{"id":104620,"name":"645副經三總"},{"id":110570,"name":"小2區"},{"id":158467,"name":"內科專車市府直達線(下午)(東南)"},{"id":158519,"name":"內科專車市府直達線(下午)(三重)"},{"id":158518,"name":"內科專車市府直達線(下午)(光華)"},{"id":157820,"name":"內科專車市府直達線(上午)(光華)"},{"id":157819,"name":"內科專車市府直達線(上午)(大南)"},{"id":157819,"name":"內科專車市府直達線(上午)(大南)"},{"id":157818,"name":"內科專車市府直達線(上午)(東南)"},{"id":158466,"name":"內科專車市府直達線(下午)(大南)"},{"id":158466,"name":"內科專車市府直達線(下午)(大南)"},{"id":155824,"name":"內科專車市府直達線(上午)(三重)"},{"id":159031,"name":"956"},{"id":159189,"name":"660區"},{"id":159150,"name":"559"},{"id":10735,"name":"253"},{"id":159146,"name":"臺北觀光巴士藍線"},{"id":159145,"name":"臺北觀光巴士紅線"}];
        // sort by name
        busList.sort((a, b) => {
            if (a.name > b.name) {
                return 1;
            }
            if (a.name < b.name) {
                return -1;
            }
            return 0;
        })
        // render dropdown
        let menuListString = '';
        busList.forEach((e) => {
            menuListString += `<li><a href="#" onclick="show(${e.id},'${e.name}')">${e.name}</a></li>`;
        })
        $(".dropdown-menu").html(menuListString);
        // dropdown item clicked
        function show(id, name) {
            $.getJSON(`https://bus-all.firebaseio.com/monitor_bus_info/${id}.json`, (d) => {
                $("#pathName").html(name + " 路線");
                draw(d);
            });
        }
        // draw path graph
        function draw(info) {
            $("#c1").empty();
            let stationNumber = info.station_number;
            let busNumber = info.bus_number;
            let nodes = [];
            let edges = [];
            // go trip
            for (let i = 0; i < stationNumber / 2; i++) {
                nodes.push({
                    "id": "node" + i,
                    "x": 0,
                    "y": i * 100,
                    "label": `${info.order[i]}： ${randN(5)}人`
                })
            }
            // back trip
            for (
                let i = (stationNumber % 2 == 0) ? stationNumber / 2 : parseInt(stationNumber / 2) + 1; i <
                stationNumber; i++) {
                nodes.push({
                    "id": "node" + i,
                    "x": 200,
                    "y": (stationNumber - i - 1) * 100,
                    "label": `${info.order[i]}： ${randN(5)}人`
                })
            }
            // link the station
            for (let i = 0; i < stationNumber - 1; i++) {
                edges.push({
                    "id": `node${i}-node${i+1}`,
                    "target": `node${i+1}`,
                    "source": `node${i}`,
                    "shape": "polyLineFlow",
                    'size': 3
                })
            }
            // put bus on the path
            for (let i = 0; i < busNumber - 1; i++) {
                for (let j = 0; j < stationNumber - 1; j++) {
                    if (info.order[j] == info.buses[i].bus_position[0] && info.order[j + 1] == info.buses[i].bus_position[
                            1]) {
                        nodes.push({
                            "id": "bus" + i + "-" + j,
                            "x": (nodes[j].x + nodes[j + 1].x) / 2,
                            "y": (nodes[j].y + nodes[j + 1].y) / 2,
                            "label": `${info.buses[i].bus_id}： 空${randN(5)}位`,
                            "style": {
                                "fill": "red"
                            }
                        })
                    }
                }
            }

            let net = new G6.Net({
                id: 'c1',
                height: 450,
                grid: null,
                mode: "none",
                fitView: 'autoSize'
            });

            net.source(nodes, edges);
            net.render();
        }

        function randN(n) {
            return Math.floor(Math.random() * n);
        }
    </script>
</body>

</html>